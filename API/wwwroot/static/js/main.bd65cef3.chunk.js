(this["webpackJsonpclient-app"]=this["webpackJsonpclient-app"]||[]).push([[0],{311:function(e,t,n){},476:function(e,t,n){"use strict";n.r(t),n.d(t,"history",(function(){return Yt}));var r=n(0),i=n(48),c=n.n(i),a=(n(307),n(308),n(309),n(310),n(311),n(496)),o=n(287),s=n(229),u=n(512),l=n(289),d=n(153),j=n(24),b=n(18),h=n(40),f=n(17),p=n(8),O=n.n(p),v=n(15),x=n(11),g=n(12),m=n(19),y=n(46),w=n.n(y),C=n(147),k="/",_="/activities",A=function(e){return _+"/".concat(e)},S=function(e){return"/manage/".concat(e)},I="/createActivity",P="/assets/user.png",L=function(e){return"/assets/categoryImages/".concat(e)},N="/assets/logo.png",F="/errors",M="/profiles",U=function(e){return M+"/".concat(e)},E=function(e){return"/photos/".concat(e)},T=function(e){return"/follow/".concat(e)},D="/api",R=function e(t,n){Object(x.a)(this,e),this.data=void 0,this.pagination=void 0,this.data=t,this.pagination=n},z=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;Object(x.a)(this,e),this.pageNumber=void 0,this.pageSize=void 0,this.pageNumber=t,this.pageSize=n};w.a.defaults.baseURL=D,w.a.interceptors.request.use((function(e){var t=oe.commonStore.token;return t&&(e.headers.Authorization="Bearer ".concat(t)),e})),w.a.interceptors.response.use(function(){var e=Object(v.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=3;break;case 3:if(!(n=t.headers.pagination)){e.next=7;break}return t.data=new R(t.data,JSON.parse(n)),e.abrupt("return",t);case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){var t=e.response,n=t.data;switch(t.status){case 400:if(n.errors){n.errors.hasOwnProperty("guid")&&Yt.push("/not-found");var r=[];for(var i in n.errors)n.errors[i]&&r.push(n.errors[i]);throw r.flat()}C.b.error(n);break;case 401:C.b.error("Unauthorised");break;case 404:Yt.push("/not-found");break;case 500:oe.commonStore.error=n,Yt.push("/server-error")}return Promise.reject(e)}));var G=function(e){return e.data},H=function(e){return w.a.get(e).then(G)},q=function(e,t){return w.a.post(e,t).then(G)},B=function(e,t){return w.a.put(e,t).then(G)},V=function(e){return w.a.delete(e).then(G)},W={Activities:{getList:function(e){return w.a.get(_,{params:e}).then(G)},getActivity:function(e){return H(A(e))},create:function(e){return q(_,e)},edit:function(e){return B(A(e.id||"unknown"),e)},delete:function(e){return V(A(e))},attend:function(e){return q(function(e){return A(e)+"/attend"}(e),{})}},Account:{currentUser:function(){return H("/account")},login:function(e){return q("/account/login",e)},register:function(e){return q("/account/register",e)}},Profiles:{getProfile:function(e){return H(U(e))},uploadPhoto:function(e){var t=new FormData;return t.append("File",e),w.a.post("photos",t,{headers:{"Content-type":"multipart/form-data"}})},setMainImage:function(e){return q(function(e){return E(e)+"/setmain"}(e),{})},deleteImage:function(e){return V(E(e))},updateProfile:function(e){return B(M,e)},updateFollowing:function(e){return q(T(e),{})},getFollowings:function(e,t){return H(function(e,t){return T(e)+"?predicate=".concat(t)}(e,t))},getProfileActivities:function(e,t){return H(function(e,t){return"/profiles/".concat(e,"/activities?predicate=").concat(t)}(e,t))}}},J=n(478);function K(e,t){return e?Object(J.default)(e,t):"INCORRECT DATE"}var Y,Z=function(){function e(){var t=this;Object(x.a)(this,e),this._activities=new Map,this._selectedActivity=void 0,this._isLoadingInitial=!1,this._isLoading=!1,this._pagination=null,this._pagingParams=new z,this._predicates=(new Map).set("all",!0),this.hasActivity=function(e){return t._activities.has(e)},this.setIsLoadingInitial=function(e){return t._isLoadingInitial=e},this.setIsLoading=function(e){return t._isLoading=e},this.setPagination=function(e){return t._pagination=e},this.setPagingParams=function(e){return t._pagingParams=e},this.setPredicate=function(e,n){"startDate"===e?t._predicates.delete(e):t._predicates.forEach((function(e,n){"startDate"!==n&&t._predicates.delete(n)})),t._predicates.set(e,n)},this.loadActivities=Object(v.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.loadInitial(Object(v.a)(O.a.mark((function e(){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.Activities.getList(t.axiosPagingParams);case 2:(n=e.sent).data.forEach((function(e){t.setActivity(e)})),t.setPagination(n.pagination);case 5:case"end":return e.stop()}}),e)}))));case 2:case"end":return e.stop()}}),e)}))),this.loadActivity=function(){var e=Object(v.a)(O.a.mark((function e(n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.loadInitial(Object(v.a)(O.a.mark((function e(){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.getActivity(n))){e.next=6;break}return t._selectedActivity=r,e.abrupt("return",r);case 6:return e.next=8,W.Activities.getActivity(n);case 8:return r=e.sent,t.setActivity(r),Object(m.h)((function(){return t._selectedActivity=r})),e.abrupt("return",r);case 12:case"end":return e.stop()}}),e)}))));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.createActivity=function(){var e=Object(v.a)(O.a.mark((function e(n){var r,i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=oe.userStore.currentUserName,i=oe.userStore.getProfileWrapper(),e.next=4,t.runInLoading(Object(v.a)(O.a.mark((function e(){var c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.Activities.create(n);case 2:(c=n.toActivity()).hostUserName=r,c.attendees=[i],t.setActivity(c),Object(m.h)((function(){return t._selectedActivity=c}));case 7:case"end":return e.stop()}}),e)}))));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.editActivity=function(){var e=Object(v.a)(O.a.mark((function e(n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.runInLoading(Object(v.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.Activities.edit(n);case 2:Object(m.h)((function(){if(n.id){var e=Object(f.a)(Object(f.a)({},t.getActivity(n.id)),n);t._activities.set(n.id,e),t._selectedActivity=e}}));case 3:case"end":return e.stop()}}),e)}))));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.deleteActivity=function(){var e=Object(v.a)(O.a.mark((function e(n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.runInLoading(Object(v.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.Activities.delete(n);case 2:Object(m.h)((function(){t._activities.delete(n)}));case 3:case"end":return e.stop()}}),e)}))));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.setActivity=function(e){var n,r,i=oe.userStore.currentUserName;i&&(e.isGoing=null===(n=e.attendees)||void 0===n?void 0:n.some((function(e){return e.userName===i})),e.isHosting=e.hostUserName===i,e.host=null===(r=e.attendees)||void 0===r?void 0:r.find((function(t){return t.userName===e.hostUserName})));e.date=new Date(e.date),t._activities.set(e.id,e)},this.updateAttendance=Object(v.a)(O.a.mark((function e(){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=oe.userStore.currentUserName,e.next=3,t.runInLoading(Object(v.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.Activities.attend(t.selectedActivity.id);case 2:Object(m.h)((function(){var e;if(null===(e=t.selectedActivity)||void 0===e?void 0:e.isGoing){var r;t.selectedActivity.attendees=null===(r=t.selectedActivity.attendees)||void 0===r?void 0:r.filter((function(e){return e.userName!==n})),t.selectedActivity.isGoing=!1}else{var i,c,a=oe.userStore.getProfileWrapper();null===(i=t.selectedActivity)||void 0===i||null===(c=i.attendees)||void 0===c||c.push(a),t.selectedActivity.isGoing=!0}t._activities.set(t.selectedActivity.id,t.selectedActivity)}));case 3:case"end":return e.stop()}}),e)}))));case 3:case"end":return e.stop()}}),e)}))),this.cancelSelectedActivityToggle=Object(v.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._selectedActivity){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.runInLoading(Object(v.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.Activities.attend(t._selectedActivity.id);case 2:Object(m.h)((function(){t._selectedActivity.isCancelled=!t._selectedActivity.isCancelled,t._activities.set(t._selectedActivity.id,t._selectedActivity)}));case 3:case"end":return e.stop()}}),e)}))));case 4:case"end":return e.stop()}}),e)}))),this.updateAttendeeFollowing=function(e){t._activities.forEach((function(t){t.attendees.forEach((function(t){t.userName===e&&(t.following?t.followersCount--:t.followersCount++,t.following=!t.following)}))}))},this.getActivity=function(e){return t._activities.get(e)},this.runInLoading=function(){var e=Object(v.a)(O.a.mark((function e(n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setIsLoading(!0),e.prev=1,e.next=4,n();case 4:return e.abrupt("return",e.sent);case 7:e.prev=7,e.t0=e.catch(1),console.error(e.t0);case 10:return e.prev=10,t.setIsLoading(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[1,7,10,13]])})));return function(t){return e.apply(this,arguments)}}(),this.loadInitial=function(){var e=Object(v.a)(O.a.mark((function e(n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setIsLoadingInitial(!0),e.prev=1,e.next=4,n();case 4:return e.abrupt("return",e.sent);case 7:e.prev=7,e.t0=e.catch(1),console.error(e.t0);case 10:return e.prev=10,t.setIsLoadingInitial(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[1,7,10,13]])})));return function(t){return e.apply(this,arguments)}}(),Object(m.d)(this),Object(m.g)((function(){return t._predicates.keys()}),(function(){t._pagingParams=new z,t._activities.clear(),t.loadActivities()}))}return Object(g.a)(e,[{key:"activitiesByDate",get:function(){return Array.from(this._activities.values()).sort((function(e,t){return e.date.getTime()-t.date.getTime()}))}},{key:"groupedActivities",get:function(){return Object.entries(this.activitiesByDate.reduce((function(e,t){var n=K(t.date,"dd MMM yyyy");return e[n]=e[n]?[].concat(Object(h.a)(e[n]),[t]):[t],e}),{}))}},{key:"selectedActivity",get:function(){return this._selectedActivity}},{key:"isLoadingInitial",get:function(){return this._isLoadingInitial}},{key:"isLoading",get:function(){return this._isLoading}},{key:"axiosPagingParams",get:function(){var e=new URLSearchParams;return e.append("pageNumber",this._pagingParams.pageNumber.toString()),e.append("pageSize",this._pagingParams.pageSize.toString()),this._predicates.forEach((function(t,n){"startDate"===n?e.append(n,t.toISOString()):e.append(n,t)})),e}},{key:"pagination",get:function(){return this._pagination}},{key:"predicates",get:function(){return this._predicates}},{key:"clearSelectedActivity",value:function(){this._selectedActivity=void 0}}]),e}(),Q="jwt",X=function(){function e(){var t=this;Object(x.a)(this,e),this._error=null,this._token=window.localStorage.getItem(Q),this._appLoaded=!1,Object(m.d)(this),Object(m.g)((function(){return t._token}),(function(e){e?window.localStorage.setItem(Q,e):window.localStorage.removeItem(Q)}))}return Object(g.a)(e,[{key:"error",get:function(){return this._error},set:function(e){this._error=e}},{key:"setToken",value:function(e){this._token=e}},{key:"token",get:function(){return this._token}},{key:"setAppLoaded",value:function(){this._appLoaded=!0}},{key:"appLoaded",get:function(){return this._appLoaded}}]),e}(),$=function e(t){Object(x.a)(this,e),this.userName=t.userName,this.displayName=t.displayName,this.image=t.image},ee=function(){function e(){var t=this;Object(x.a)(this,e),this.user=null,this.getProfileWrapper=function(){return t.user?new $(t.user):null},this.login=function(){var e=Object(v.a)(O.a.mark((function e(n){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.Account.login(n);case 2:r=e.sent,oe.commonStore.setToken(r.token),Object(m.h)((function(){return t.user=r})),Yt.push(_),oe.modalStore.closeModal();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.logout=function(){oe.commonStore.setToken(null),t.user=null,Yt.push(k)},this.register=function(){var e=Object(v.a)(O.a.mark((function e(n){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.Account.register(n);case 2:r=e.sent,oe.commonStore.setToken(r.token),Object(m.h)((function(){return t.user=r})),Yt.push(_),oe.modalStore.closeModal();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.loadCurrentUser=Object(v.a)(O.a.mark((function e(){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W.Account.currentUser();case 3:n=e.sent,Object(m.h)((function(){return t.user=n})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),this.setCurrentUserMainImage=function(e){t.user&&(t.user.image=e)},this.setDisplayName=function(e){t.user&&(t.user.displayName=e)},Object(m.d)(this)}return Object(g.a)(e,[{key:"isLoggedIn",get:function(){return!!this.user}},{key:"currentUserName",get:function(){var e;return null===(e=this.user)||void 0===e?void 0:e.userName}},{key:"currentImage",get:function(){var e;return null===(e=this.user)||void 0===e?void 0:e.image}},{key:"currentDisplayName",get:function(){var e;return null===(e=this.user)||void 0===e?void 0:e.displayName}}]),e}(),te=function(){function e(){var t=this;Object(x.a)(this,e),this._content=null,this._isOpen=!1,this.openModal=function(e){t._content=e,t._isOpen=!0},this.closeModal=function(){t._content=null,t._isOpen=!1},Object(m.d)(this)}return Object(g.a)(e,[{key:"content",get:function(){return this._content}},{key:"isOpen",get:function(){return this._isOpen}}]),e}();!function(e){e[e.About=0]="About",e[e.Photos=1]="Photos",e[e.Events=2]="Events",e[e.Followers=3]="Followers",e[e.Following=4]="Following"}(Y||(Y={}));var ne=function(){function e(){var t=this;Object(x.a)(this,e),this._profile=null,this._isLoadingProfile=!1,this._isUploading=!1,this._isLoading=!1,this._activeTab=0,this._followings=[],this._isLoadingFollowers=!1,this._profileActivities=[],this.loadProfile=function(){var e=Object(v.a)(O.a.mark((function e(n){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._isLoadingProfile=!0,e.prev=1,e.next=4,W.Profiles.getProfile(n);case 4:r=e.sent,Object(m.h)((function(){t._profile=r})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:return e.prev=11,Object(m.h)((function(){return t._isLoadingProfile=!1})),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})));return function(t){return e.apply(this,arguments)}}(),this.uploadPhoto=function(){var e=Object(v.a)(O.a.mark((function e(n){var r,i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._isUploading=!0,e.prev=1,e.next=4,W.Profiles.uploadPhoto(n);case 4:r=e.sent,i=r.data,Object(m.h)((function(){var e;t._profile&&(null===(e=t._profile.photos)||void 0===e||e.push(i),i.isMain&&(oe.userStore.setCurrentUserMainImage(i.url),t._profile.image=i.url))})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:return e.prev=12,Object(m.h)((function(){return t._isUploading=!1})),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,9,12,15]])})));return function(t){return e.apply(this,arguments)}}(),this.setMainImage=function(){var e=Object(v.a)(O.a.mark((function e(n){var r,i,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null===(c=null===(r=t._profile)||void 0===r||null===(i=r.photos)||void 0===i?void 0:i.find((function(e){return e.isMain})))||void 0===c?void 0:c.id)!==n.id){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,t.runInLoading(Object(v.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.Profiles.setMainImage(n.id);case 2:oe.userStore.setCurrentUserMainImage(n.url),Object(m.h)((function(){t._profile&&t._profile.photos&&(t._profile.image=n.url,c.isMain=!1,t._profile.photos.find((function(e){return e.id===n.id})).isMain=!0)}));case 4:case"end":return e.stop()}}),e)}))));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.deleteImage=function(){var e=Object(v.a)(O.a.mark((function e(n){var r,i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(r=t._profile)||void 0===r||null===(i=r.photos)||void 0===i?void 0:i.some((function(e){return e.id===n.id}))){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.runInLoading(Object(v.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.Profiles.deleteImage(n.id);case 2:Object(m.h)((function(){var e;t._profile&&(t._profile.photos=null===(e=t._profile.photos)||void 0===e?void 0:e.filter((function(e){return e.id!==n.id})))}));case 3:case"end":return e.stop()}}),e)}))));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.updateProfile=function(){var e=Object(v.a)(O.a.mark((function e(n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.runInLoading(Object(v.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.Profiles.updateProfile(n);case 2:oe.userStore.setDisplayName(n.displayName),Object(m.h)((function(){t._profile&&(t._profile.displayName=n.displayName,t._profile.about=n.about)}));case 4:case"end":return e.stop()}}),e)}))));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.updateFollowing=function(e){t.runInLoading(Object(v.a)(O.a.mark((function n(){var r,i,c;return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,W.Profiles.updateFollowing(e);case 2:r=n.sent,i=r.following,oe.activityStore.updateAttendeeFollowing(e),c=i?1:-1,Object(m.h)((function(){if(t._profile){var n=t._profile.userName===e;t._profile.userName===oe.userStore.currentUserName?t._profile.followingCount+=c:n&&(t._profile.followersCount+=c,t._profile.following=i)}t._followings.forEach((function(t){t.userName===e&&(t.followersCount+=c,t.following=i)}))}));case 7:case"end":return n.stop()}}),n)}))))},this.loadProfileActivities=function(e){if(e)return t.runInLoading(Object(v.a)(O.a.mark((function n(){var r;return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t._profile){n.next=6;break}return n.next=3,W.Profiles.getProfileActivities(t._profile.userName,e);case 3:(r=n.sent).forEach((function(e){e.date=new Date(e.date)})),Object(m.h)((function(){return t._profileActivities=r}));case 6:case"end":return n.stop()}}),n)}))))},this.clearProfileActivities=function(){return t._profileActivities=[]},this.loadFollowings=function(){var e=Object(v.a)(O.a.mark((function e(n){var r,i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._isLoadingFollowers=!0,e.prev=1,e.next=4,W.Profiles.getFollowings(null===(r=t._profile)||void 0===r?void 0:r.userName,n);case 4:i=e.sent,Object(m.h)((function(){return t._followings=i})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:return e.prev=11,Object(m.h)((function(){return t._isLoadingFollowers=!1})),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})));return function(t){return e.apply(this,arguments)}}(),this.runInLoading=function(){var e=Object(v.a)(O.a.mark((function e(n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setIsLoading(!0),e.prev=1,e.next=4,n();case 4:return e.abrupt("return",e.sent);case 7:e.prev=7,e.t0=e.catch(1),console.error(e.t0);case 10:return e.prev=10,t.setIsLoading(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[1,7,10,13]])})));return function(t){return e.apply(this,arguments)}}(),Object(m.d)(this),Object(m.g)((function(){return t._activeTab}),(function(e){if(e===Y.Following||e===Y.Followers){var n=e===Y.Followers?"followers":"following";t.loadFollowings(n)}else t._followings=[]}))}return Object(g.a)(e,[{key:"profile",get:function(){return this._profile}},{key:"profileActivities",get:function(){return this._profileActivities}},{key:"isLoadingProfile",get:function(){return this._isLoadingProfile}},{key:"isUploading",get:function(){return this._isUploading}},{key:"isLoading",get:function(){return this._isLoading}},{key:"isLoadingFollowers",get:function(){return this._isLoadingFollowers}},{key:"followings",get:function(){return this._followings}},{key:"isCurrentUser",get:function(){var e=oe.userStore.currentUserName;return!!this._profile&&e===this._profile.userName}},{key:"activeTab",get:function(){return this._activeTab},set:function(e){this._activeTab=e}},{key:"setIsLoading",value:function(e){this._isLoading=e}}]),e}(),re=function e(t,n){Object(x.a)(this,e),this.body=void 0,this.activityId=void 0,this.body=t,this.activityId=n},ie=n(500),ce=n(9),ae=function(){function e(){var t=this;Object(x.a)(this,e),this._comments=[],this._hubConnection=null,this.createHubConnection=function(e){oe.activityStore.hasActivity(e)&&(t._hubConnection=(new ie.a).withUrl(function(e){return"/chat"+"?activityId=".concat(e)}(e),{accessTokenFactory:function(){return oe.commonStore.token}}).withAutomaticReconnect().configureLogging(ce.a.Information).build(),t._hubConnection.start().catch((function(e){return console.log("Error establishing the connection: ",e)})),t._hubConnection.on("LoadComments",(function(e){Object(m.h)((function(){e.forEach((function(e){e.createdAt=new Date(e.createdAt+"Z")})),t._comments=e}))})),t._hubConnection.on("ReceiveComment",(function(e){Object(m.h)((function(){e.createdAt=new Date(e.createdAt),t._comments.unshift(e)}))})))},this.stopHubConnection=function(){var e;null===(e=t._hubConnection)||void 0===e||e.stop().catch((function(e){return console.log("Error stopping connection: ",e)}))},this.clearComments=function(){t._comments=[],t.stopHubConnection()},this.addComment=function(){var e=Object(v.a)(O.a.mark((function e(n){var r,i,c,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=null===(r=oe.activityStore.selectedActivity)||void 0===r?void 0:r.id,c=new re(n,i),e.prev=2,e.next=5,null===(a=t._hubConnection)||void 0===a?void 0:a.invoke("SendComment",c);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}(),Object(m.d)(this)}return Object(g.a)(e,[{key:"comments",get:function(){return this._comments}}]),e}(),oe={activityStore:new Z,commonStore:new X,userStore:new ee,modalStore:new te,profileStore:new ne,commentStore:new ae},se=Object(r.createContext)(oe);function ue(){return Object(r.useContext)(se)}var le=n(1),de=Object(b.a)((function(){var e=ue().userStore,t=e.logout,n=e.currentUserName,r=e.currentImage,i=e.currentDisplayName;return Object(le.jsx)(o.a,{inverted:!0,fixed:"top",children:Object(le.jsxs)(a.a,{children:[Object(le.jsxs)(s.a,{as:j.b,exact:!0,to:k,header:!0,children:[Object(le.jsx)("img",{src:N,alt:"logo"}),"Reactivities"]}),Object(le.jsx)(s.a,{as:j.b,to:_,name:"Activities"}),Object(le.jsx)(s.a,{as:j.b,to:F,name:"Errors"}),Object(le.jsx)(s.a,{children:Object(le.jsx)(u.a,{as:j.b,to:I,content:"Create Activity",positive:!0})}),Object(le.jsxs)(s.a,{position:"right",children:[Object(le.jsx)(l.a,{src:r||P,avatar:!0,spaced:"right"}),Object(le.jsx)(d.a,{pointing:"top left",text:i,children:Object(le.jsxs)(d.a.Menu,{children:[Object(le.jsx)(d.a.Item,{as:j.a,to:U(n||"unknown"),content:"My profile",icon:"user"}),Object(le.jsx)(d.a.Item,{onClick:t,content:"Logout",icon:"power"})]})})]})]})})})),je=n(21),be=n(290),he=n(139),fe=n(497),pe=n(516),Oe=n(230),ve=n(192),xe=n(505),ge=n(94),me=n(506),ye=n(502),we=n(508),Ce=n(518),ke=Object(b.a)((function(e){var t=e.profile,n=ue(),r=n.profileStore,i=n.userStore,c=r.updateFollowing,a=r.isLoading;return t.userName===i.currentUserName?null:Object(le.jsxs)(Ce.a,{animated:"move",children:[Object(le.jsx)(Ce.a.Content,{visible:!0,style:{width:"100%"},children:Object(le.jsx)(u.a,{fluid:!0,color:"teal",content:t.following?"Following":"Not following"})}),Object(le.jsx)(Ce.a.Content,{hidden:!0,style:{width:"100%"},children:Object(le.jsx)(u.a,{onClick:function(e){return function(e,t){e.preventDefault(),c(t)}(e,t.userName)},fluid:!0,basic:!0,color:t.following?"red":"green",content:t.following?"Unfollow":"Follow",loading:a})})]})})),_e=Object(b.a)((function(e){var t=e.profile,n=e.aboutLength,r=void 0===n?40:n;var i=t.about?function(e){if(e)return e.length>r?e.substring(0,r-3)+"...":e}(t.about):"Hello, I am ".concat(t.displayName);return Object(le.jsxs)(we.a,{as:j.a,to:U(t.userName),children:[Object(le.jsx)(l.a,{src:t.image||P}),Object(le.jsxs)(we.a.Content,{children:[Object(le.jsx)(we.a.Header,{children:t.displayName}),Object(le.jsx)(we.a.Description,{children:i})]}),Object(le.jsxs)(we.a.Content,{extra:!0,children:[Object(le.jsx)(ge.a,{name:"user"}),t.followersCount," followers"]}),Object(le.jsx)(ke,{profile:t})]})})),Ae={borderColor:"orange",borderWidth:3},Se=Object(b.a)((function(e){var t=e.attendees;return Object(le.jsx)(me.a,{horizontal:!0,children:t.map((function(e){return Object(le.jsx)(ye.a,{hoverable:!0,trigger:Object(le.jsx)(me.a.Item,{as:j.a,to:U(e.userName),children:Object(le.jsx)(l.a,{src:e.image||P,size:"mini",circular:!0,bordered:!0,style:e.following?Ae:null})},e.userName),children:Object(le.jsx)(_e,{profile:e})},e.userName)}))})}));function Ie(e){var t,n,r=e.activity;return Object(le.jsxs)(Oe.a.Group,{children:[Object(le.jsxs)(Oe.a,{children:[r.isCancelled&&Object(le.jsx)(ve.a,{attached:"top",color:"red",content:"Cancelled",style:{textAlign:"center"}}),Object(le.jsx)(xe.a.Group,{children:Object(le.jsxs)(xe.a,{children:[Object(le.jsx)(xe.a.Image,{src:(null===(t=r.host)||void 0===t?void 0:t.image)||P,as:j.a,to:U(r.hostUserName),size:"tiny",circular:!0,style:{marginBottom:3}}),Object(le.jsxs)(xe.a.Content,{children:[Object(le.jsx)(xe.a.Header,{as:j.a,to:A(r.id),children:r.title}),Object(le.jsxs)(xe.a.Description,{children:["Hosted by ",Object(le.jsx)(j.a,{to:U(r.hostUserName),children:null===(n=r.host)||void 0===n?void 0:n.displayName})]}),r.isHosting&&Object(le.jsx)(xe.a.Description,{children:Object(le.jsx)(ve.a,{basic:!0,color:"orange",children:"You are hosting this activity"})}),r.isGoing&&!r.isHosting&&Object(le.jsx)(xe.a.Description,{children:Object(le.jsx)(ve.a,{basic:!0,color:"green",children:"You are going to this activity"})})]})]})})]}),Object(le.jsxs)(Oe.a,{children:[Object(le.jsx)(ge.a,{name:"clock"})," ",Object(le.jsx)("span",{style:{marginRight:"1em"},children:K(r.date,"dd MMM yyyy hh:mm")}),Object(le.jsx)(ge.a,{name:"marker"}),r.venue]}),Object(le.jsx)(Oe.a,{secondary:!0,children:Object(le.jsx)(Se,{attendees:r.attendees})}),Object(le.jsxs)(Oe.a,{clearing:!0,children:[Object(le.jsx)("span",{children:r.description}),Object(le.jsx)(u.a,{as:j.a,to:A(r.id),color:"teal",floated:"right",content:"View"})]})]})}var Pe=Object(b.a)((function(){var e=ue().activityStore.groupedActivities;return Object(le.jsx)(le.Fragment,{children:e.map((function(e){var t=Object(je.a)(e,2),n=t[0],i=t[1];return Object(le.jsxs)(r.Fragment,{children:[Object(le.jsx)(pe.a,{sub:!0,color:"teal",children:n}),i.map((function(e){return Object(le.jsx)(Ie,{activity:e},e.id)}))]},n)}))})})),Le=n(285),Ne=Object(b.a)((function(){var e=ue().activityStore,t=e.predicates,n=e.setPredicate;return Object(le.jsxs)(le.Fragment,{children:[Object(le.jsxs)(o.a,{vertical:!0,size:"large",style:{width:"100%",marginTop:"1.8em"},children:[Object(le.jsx)(pe.a,{content:"Filters",icon:"filter",color:"teal",attached:!0}),Object(le.jsx)(o.a.Item,{content:"All Activities",active:t.has("all"),onClick:function(){return n("all","true")}}),Object(le.jsx)(o.a.Item,{content:"I'm going",active:t.has("isGoing"),onClick:function(){return n("isGoing","true")}}),Object(le.jsx)(o.a.Item,{content:"I'm hosting",active:t.has("isHost"),onClick:function(){return n("isHost","true")}})]}),Object(le.jsx)(pe.a,{}),Object(le.jsx)(Le.a,{onChange:function(e){return n("startDate",e)},value:t.get("startDate")})]})})),Fe=n(275),Me=n.n(Fe),Ue=n(509);function Ee(){return Object(le.jsx)(r.Fragment,{children:Object(le.jsx)(Ue.a,{fluid:!0,style:{marginTop:25},children:Object(le.jsxs)(Oe.a.Group,{children:[Object(le.jsx)(Oe.a,{style:{minHeight:110},children:Object(le.jsxs)(Ue.a,{children:[Object(le.jsxs)(Ue.a.Header,{image:!0,children:[Object(le.jsx)(Ue.a.Line,{}),Object(le.jsx)(Ue.a.Line,{})]}),Object(le.jsx)(Ue.a.Paragraph,{children:Object(le.jsx)(Ue.a.Line,{})})]})}),Object(le.jsx)(Oe.a,{children:Object(le.jsxs)(Ue.a,{children:[Object(le.jsx)(Ue.a.Line,{}),Object(le.jsx)(Ue.a.Line,{})]})}),Object(le.jsx)(Oe.a,{secondary:!0,style:{minHeight:70}}),Object(le.jsx)(Oe.a,{clearing:!0,children:Object(le.jsx)(u.a,{disabled:!0,color:"blue",floated:"right",content:"View"})})]})})})}var Te=Object(b.a)((function(){var e=ue().activityStore,t=e.activitiesByDate,n=e.loadActivities,i=e.setPagingParams,c=e.pagination,a=e.isLoadingInitial,o=Object(r.useState)(!1),s=Object(je.a)(o,2),u=s[0],l=s[1];return Object(r.useEffect)((function(){t.length<=1&&n()}),[n,t.length]),Object(le.jsxs)(be.a,{children:[Object(le.jsx)(he.a,{width:"10",children:a&&!u?Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)(Ee,{}),Object(le.jsx)(Ee,{})]}):Object(le.jsx)(Me.a,{pageStart:0,loadMore:function(){c&&(l(!0),i(new z(c.currentPage+1)),n().then((function(){return l(!1)})))},hasMore:!u&&!!c&&c.currentPage<c.totalPagesCount,initialLoad:!1,children:Object(le.jsx)(Pe,{})})}),Object(le.jsx)(he.a,{width:"6",children:Object(le.jsx)(Ne,{})}),Object(le.jsx)(be.a.Column,{width:10,children:Object(le.jsx)(fe.a,{active:u})})]})})),De=n(32),Re=n(28),ze=n(501);function Ge(e){var t=Object(Re.e)(e.name),n=Object(je.a)(t,2),r=n[0],i=n[1];return Object(le.jsxs)(ze.a.Field,{error:i.touched&&!!i.error,children:[Object(le.jsx)("label",{children:e.label}),Object(le.jsx)("input",Object(f.a)(Object(f.a)({},r),e)),i.touched&&i.error?Object(le.jsx)(ve.a,{basic:!0,color:"red",children:i.error}):null]})}var He=Object(b.a)((function(){var e=ue().userStore;return Object(le.jsx)(Re.d,{initialValues:{email:"",password:"",error:null},onSubmit:function(t,n){var r=n.setErrors;return e.login(t).catch((function(e){return r({error:"Invalid email or password"})}))},children:function(e){var t=e.handleSubmit,n=e.isSubmitting,r=e.errors;return Object(le.jsxs)(Re.c,{className:"ui form",onSubmit:t,autoComplete:"off",children:[Object(le.jsx)(pe.a,{as:"h2",content:"Login to Reactivities",color:"teal",textAlign:"center"}),Object(le.jsx)(Ge,{placeholder:"Email",name:"email"}),Object(le.jsx)(Ge,{placeholder:"Password",name:"password",type:"password"}),Object(le.jsx)(Re.a,{name:"error",render:function(){return Object(le.jsx)(ve.a,{style:{marginBottom:10},basic:!0,color:"red",content:r.error})}}),Object(le.jsx)(u.a,{content:"Login",type:"submit",positive:!0,fluid:!0,loading:n})]})}})})),qe=n(36),Be=n(510);function Ve(e){var t=e.errors;return Object(le.jsx)(Be.a,{error:!0,children:t&&Object(le.jsx)(Be.a.List,{children:t.map((function(e,t){return Object(le.jsx)(Be.a.Item,{children:e},t)}))})})}var We=Object(b.a)((function(){var e=ue().userStore,t=qe.a({displayName:qe.b().required(),userName:qe.b().required(),email:qe.b().required().email(),password:qe.b().required()});return Object(le.jsx)(Re.d,{initialValues:{displayName:"",userName:"",email:"",password:"",error:null},onSubmit:function(t,n){var r=n.setErrors;return e.register(t).catch((function(e){return r({error:e})}))},validationSchema:t,children:function(e){var t=e.handleSubmit,n=e.isSubmitting,r=e.errors,i=e.isValid,c=e.dirty;return Object(le.jsxs)(Re.c,{className:"ui form error",onSubmit:t,autoComplete:"off",children:[Object(le.jsx)(pe.a,{as:"h2",content:"Register to Reactivities",color:"teal",textAlign:"center"}),Object(le.jsx)(Ge,{placeholder:"Display Name",name:"displayName"}),Object(le.jsx)(Ge,{placeholder:"Username",name:"userName"}),Object(le.jsx)(Ge,{placeholder:"Email",name:"email"}),Object(le.jsx)(Ge,{placeholder:"Password",name:"password",type:"password"}),Object(le.jsx)(Re.a,{name:"error",render:function(){return Object(le.jsx)(Ve,{errors:r.error})}}),Object(le.jsx)(u.a,{content:"Register",type:"submit",disabled:!i||!c||n,positive:!0,fluid:!0,loading:n})]})}})})),Je=Object(b.a)((function(){var e=ue(),t=e.userStore,n=e.modalStore;return Object(le.jsx)(Oe.a,{inverted:!0,vertical:!0,textAlign:"center",className:"masthead",children:Object(le.jsxs)(a.a,{text:!0,children:[Object(le.jsxs)(pe.a,{as:"h1",inverted:!0,children:[Object(le.jsx)(l.a,{src:N,alt:"logo",size:"massive",style:{marginBottom:12}}),"Reactivities"]}),t.isLoggedIn?Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)(pe.a,{as:"h2",inverted:!0,content:"Welcome to Reactivities"}),Object(le.jsx)(u.a,{as:j.a,to:_,size:"huge",inverted:!0,children:"Go to activities!"})]}):Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)(u.a,{onClick:function(){return n.openModal(Object(le.jsx)(He,{}))},size:"huge",inverted:!0,children:"Login"}),Object(le.jsx)(u.a,{onClick:function(){return n.openModal(Object(le.jsx)(We,{}))},size:"huge",inverted:!0,children:"Register"})]})]})})})),Ke=function(){function e(t){Object(x.a)(this,e),this.id=void 0,this.title="",this.date=null,this.description="",this.category="",this.city="",this.venue="",t&&(this.id=t.id,this.title=t.title,this.date=t.date,this.description=t.description,this.category=t.category,this.city=t.city,this.venue=t.venue)}return Object(g.a)(e,[{key:"toActivity",value:function(){return{id:this.id,title:this.title,date:this.date,description:this.description,category:this.category,city:this.city,venue:this.venue}}}]),e}(),Ye=n(514);function Ze(e){var t=e.inverted,n=void 0===t||t,r=e.content,i=void 0===r?"Loading...":r;return Object(le.jsx)(Ye.a,{active:!0,inverted:n,children:Object(le.jsx)(fe.a,{content:i})})}var Qe=n(511);function Xe(e){var t=Object(Re.e)(e.name),n=Object(je.a)(t,2),r=n[0],i=n[1];return Object(le.jsxs)(ze.a.Field,{error:i.touched&&!!i.error,children:[Object(le.jsx)("label",{children:e.label}),Object(le.jsx)("textarea",Object(f.a)(Object(f.a)({},r),e)),i.touched&&i.error?Object(le.jsx)(ve.a,{basic:!0,color:"red",children:i.error}):null]})}var $e=n(498);function et(e){var t=Object(Re.e)(e.name),n=Object(je.a)(t,3),r=n[0],i=n[1],c=n[2];return Object(le.jsxs)(ze.a.Field,{error:i.touched&&!!i.error,children:[Object(le.jsx)("label",{children:e.label}),Object(le.jsx)($e.a,{clearable:!0,options:e.options,value:r.value||null,onChange:function(e,t){return c.setValue(t.value)},onBlur:function(){return c.setTouched(!0)},placeholder:e.placeholder}),i.touched&&i.error?Object(le.jsx)(ve.a,{basic:!0,color:"red",children:i.error}):null]})}var tt=[{text:"Culture",value:"culture"},{text:"Film",value:"film"},{text:"Food",value:"food"},{text:"Meeting",value:"meeting"},{text:"Music",value:"music"},{text:"Travel",value:"travel"}],nt=n(280),rt=n.n(nt);function it(e){var t=Object(Re.e)(e.name),n=Object(je.a)(t,3),r=n[0],i=n[1],c=n[2];return Object(le.jsxs)(ze.a.Field,{error:i.touched&&!!i.error,children:[Object(le.jsx)("label",{children:e.label}),Object(le.jsx)(rt.a,Object(f.a)(Object(f.a)(Object(f.a)({},r),e),{},{selected:r.value&&new Date(r.value)||null,onChange:function(e){return c.setValue(e)}})),i.touched&&i.error?Object(le.jsx)(ve.a,{basic:!0,color:"red",children:i.error}):null]})}function ct(e){var t=e.confirmCallback,n=e.cancelCallback,i=e.headerContent,c=Object(r.useState)(!1),a=Object(je.a)(c,2),o=a[0],s=a[1];return Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)(pe.a,{content:i||"Are you sure?",as:"h2",color:"teal",style:{textAlign:"center",marginBottom:"1em"}}),Object(le.jsxs)("div",{style:{display:"flex",justifyContent:"center",width:"100%"},children:[Object(le.jsx)(u.a,{onClick:function(){s(!0),t()},icon:"check",color:"green",basic:!0,loading:o,style:{padding:"1em 2em"}}),Object(le.jsx)(u.a,{onClick:n,icon:"cancel",color:"red",basic:!0,style:{padding:"1em 2em"}})]})]})}var at=Object(b.a)((function(){var e=ue(),t=e.activityStore,n=e.modalStore,i=t.loadActivity,c=t.deleteActivity,a=t.selectedActivity,o=Object(De.i)().id,s=Object(De.g)(),l=Object(r.useState)(new Ke),d=Object(je.a)(l,2),b=d[0],h=d[1],f=qe.a({title:qe.b().required("The activity title is required"),description:qe.b().required("The activity description is required"),date:qe.b().required(),category:qe.b().required(),city:qe.b().required(),venue:qe.b().required()});function p(){return p=Object(v.a)(O.a.mark((function e(n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.id){e.next=6;break}return n.id=Object(Qe.a)(),e.next=4,t.createActivity(n);case 4:e.next=8;break;case 6:return e.next=8,t.editActivity(n);case 8:s.push(A(n.id));case 9:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}function x(){n.openModal(Object(le.jsx)(ct,{headerContent:"Are you sure you want to delete this activity?",confirmCallback:g,cancelCallback:n.closeModal}))}function g(){c(a.id).then((function(){n.closeModal(),s.push(_)}))}return Object(r.useEffect)((function(){o&&i(o).then((function(e){return h(new Ke(e))}))}),[o,i]),t.isLoadingInitial?Object(le.jsx)(Ze,{content:"Loading activity..."}):Object(le.jsx)(Oe.a,{clearing:!0,children:Object(le.jsx)(Re.d,{validationSchema:f,enableReinitialize:!0,initialValues:b,onSubmit:function(e){return p.apply(this,arguments)},children:function(e){var t=e.handleSubmit,n=e.isSubmitting,r=e.dirty,i=e.isValid;return Object(le.jsxs)(Re.c,{className:"ui form",onSubmit:t,autoComplete:"off",children:[Object(le.jsx)(pe.a,{content:"Activity Details",sub:!0,color:"teal"}),Object(le.jsx)(Ge,{placeholder:"Title",name:"title"}),Object(le.jsx)(Xe,{placeholder:"Description of the activity",name:"description",rows:3}),Object(le.jsx)(et,{placeholder:"Category",name:"category",options:tt}),Object(le.jsx)(it,{placeholderText:"Date",name:"date",showTimeSelect:!0,timeCaption:"time",dateFormat:"MMMM d, yyyy hh:mm"}),Object(le.jsx)(pe.a,{content:"Location Details",sub:!0,color:"teal"}),Object(le.jsx)(Ge,{placeholder:"City",name:"city"}),Object(le.jsx)(Ge,{placeholder:"Venue",name:"venue"}),o&&Object(le.jsx)(u.a,{onClick:x,type:"button",floated:"right",icon:"trash",basic:!0,disabled:n,color:"red"}),Object(le.jsx)(u.a,{type:"submit",content:"Submit",positive:!0,floated:"left",loading:n,disabled:n||!r||!i}),Object(le.jsx)(u.a,{as:j.a,to:_,floated:"left",type:"button",content:"Cancel",disabled:n})]})}})})})),ot={filter:"brightness(30%)"},st={position:"absolute",bottom:"5%",left:"5%",width:"100%",height:"auto",color:"white"},ut=Object(b.a)((function(e){var t,n=e.activity,r=ue().activityStore,i=r.updateAttendance,c=r.isLoading,a=r.cancelSelectedActivityToggle;return Object(le.jsxs)(Oe.a.Group,{children:[Object(le.jsxs)(Oe.a,{basic:!0,attached:"top",style:{padding:"0"},children:[n.isCancelled&&Object(le.jsx)(ve.a,{style:{position:"absolute",zIndex:1e3,left:-14,top:20},ribbon:!0,color:"red",content:"Cancelled"}),Object(le.jsx)(l.a,{src:L("".concat(n.category,".jpg")),fluid:!0,style:ot}),Object(le.jsx)(Oe.a,{style:st,basic:!0,children:Object(le.jsx)(xe.a.Group,{children:Object(le.jsx)(xe.a,{children:Object(le.jsxs)(xe.a.Content,{children:[Object(le.jsx)(pe.a,{size:"huge",content:n.title,style:{color:"white"}}),Object(le.jsx)("p",{children:K(n.date,"dd MMM yyyy")}),Object(le.jsxs)("p",{children:["Hosted by ",Object(le.jsx)("strong",{children:Object(le.jsx)(j.a,{to:U(n.hostUserName),children:null===(t=n.host)||void 0===t?void 0:t.displayName})})]})]})})})})]}),Object(le.jsx)(Oe.a,{clearing:!0,attached:"bottom",children:n.isHosting?Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)(u.a,{onClick:a,color:n.isCancelled?"green":"red",floated:"left",basic:!0,loading:c,children:n.isCancelled?"Re-activate activity":"Cancel activity"}),Object(le.jsx)(u.a,{as:j.a,to:S(n.id),disabled:n.isCancelled,color:"orange",floated:"right",content:"Manage Event"})]}):n.isGoing?Object(le.jsx)(u.a,{onClick:i,loading:c,children:"Cancel attendance"}):Object(le.jsx)(u.a,{onClick:i,loading:c,color:"teal",disabled:n.isCancelled,children:"Join Activity"})})]})})),lt=Object(b.a)((function(e){var t=e.activity;return Object(le.jsxs)(Oe.a.Group,{children:[Object(le.jsx)(Oe.a,{attached:"top",children:Object(le.jsxs)(be.a,{children:[Object(le.jsx)(be.a.Column,{width:1,children:Object(le.jsx)(ge.a,{size:"large",color:"teal",name:"info"})}),Object(le.jsx)(be.a.Column,{width:15,children:Object(le.jsx)("p",{children:t.description})})]})}),Object(le.jsx)(Oe.a,{attached:!0,children:Object(le.jsxs)(be.a,{verticalAlign:"middle",children:[Object(le.jsx)(be.a.Column,{width:1,children:Object(le.jsx)(ge.a,{name:"calendar",size:"large",color:"teal"})}),Object(le.jsx)(be.a.Column,{width:15,children:Object(le.jsx)("span",{children:K(t.date,"dd MMM yyyy hh:mm")})})]})}),Object(le.jsx)(Oe.a,{attached:!0,children:Object(le.jsxs)(be.a,{verticalAlign:"middle",children:[Object(le.jsx)(be.a.Column,{width:1,children:Object(le.jsx)(ge.a,{name:"marker",size:"large",color:"teal"})}),Object(le.jsx)(be.a.Column,{width:11,children:Object(le.jsxs)("span",{children:[t.venue,", ",t.city]})})]})})]})})),dt=n(503),jt=n(504),bt=Object(b.a)((function(e){var t=e.activityId,n=ue().commentStore;return Object(r.useEffect)((function(){return t&&n.createHubConnection(t),function(){n.clearComments()}}),[n,t]),Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)(Oe.a,{textAlign:"center",attached:"top",inverted:!0,color:"teal",style:{border:"none"},children:Object(le.jsx)(pe.a,{children:"Chat about this event"})}),Object(le.jsx)(Oe.a,{attached:!0,clearing:!0,children:Object(le.jsxs)(dt.a.Group,{children:[Object(le.jsx)(Re.d,{initialValues:{body:""},onSubmit:function(e,t){var r=t.resetForm;return n.addComment(e.body).then((function(){return r()}))},validationSchema:qe.a({body:qe.b().required()}),children:function(e){var t=e.isSubmitting,n=e.isValid,r=e.handleSubmit;return Object(le.jsx)(Re.c,{className:"ui form",children:Object(le.jsx)(Re.b,{name:"body",children:function(e){return Object(le.jsxs)("div",{style:{position:"relative"},children:[Object(le.jsx)(fe.a,{active:t}),Object(le.jsx)("textarea",Object(f.a)(Object(f.a)({placeholder:"Enter your comment",rows:2},e.field),{},{onKeyPress:function(e){"Enter"===e.key&&e.shiftKey||"Enter"!==e.key||e.shiftKey||(e.preventDefault(),n&&r())}}))]})}})})}}),n.comments.map((function(e){return Object(le.jsxs)(dt.a,{children:[Object(le.jsx)(dt.a.Avatar,{src:e.image||P}),Object(le.jsxs)(dt.a.Content,{children:[Object(le.jsx)(dt.a.Author,{as:j.a,to:U(e.userName),children:e.displayName}),Object(le.jsx)(dt.a.Metadata,{children:Object(le.jsxs)("div",{children:[Object(jt.a)(e.createdAt)," ago"]})}),Object(le.jsx)(dt.a.Text,{style:{whiteSpace:"pre-wrap"},children:e.body})]})]},e.id)}))]})})]})})),ht=Object(b.a)((function(e){var t=e.activity,n=t.attendees,r=t.host;return Object(le.jsxs)(le.Fragment,{children:[Object(le.jsxs)(Oe.a,{textAlign:"center",style:{border:"none"},attached:"top",secondary:!0,inverted:!0,color:"teal",children:[n.length," ",1===n.length?"Person":"People"," Going"]}),Object(le.jsx)(Oe.a,{attached:!0,children:Object(le.jsx)(me.a,{relaxed:!0,divided:!0,children:n.map((function(e){return Object(le.jsxs)(xe.a,{style:{position:"relative"},children:[e.userName===(null===r||void 0===r?void 0:r.userName)&&Object(le.jsx)(ve.a,{style:{position:"absolute"},color:"orange",ribbon:"right",children:"Host"}),Object(le.jsx)(l.a,{size:"tiny",src:e.image||P}),Object(le.jsxs)(xe.a.Content,{verticalAlign:"middle",children:[Object(le.jsx)(xe.a.Header,{as:"h3",children:Object(le.jsx)(j.a,{to:U(e.userName),children:e.displayName})}),e.following&&Object(le.jsx)(xe.a.Extra,{style:{color:"orange"},children:"Following"})]})]},e.userName)}))})})]})})),ft=Object(b.a)((function(){var e=ue().activityStore,t=e.selectedActivity,n=Object(De.i)().id;return Object(r.useEffect)((function(){return n&&e.loadActivity(n),function(){return e.clearSelectedActivity()}}),[n,e]),e.isLoadingInitial||!t?Object(le.jsx)(Ze,{}):Object(le.jsxs)(be.a,{children:[Object(le.jsxs)(be.a.Column,{width:"10",children:[Object(le.jsx)(ut,{activity:t}),Object(le.jsx)(lt,{activity:t}),Object(le.jsx)(bt,{activityId:t.id})]}),Object(le.jsx)(be.a.Column,{width:"6",children:Object(le.jsx)(ht,{activity:t})})]})}));function pt(){var e=Object(r.useState)(null),t=Object(je.a)(e,2),n=t[0],i=t[1];return Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)(pe.a,{as:"h1",content:"Test Error component"}),Object(le.jsxs)(Oe.a,{children:[Object(le.jsxs)(u.a.Group,{widths:"7",children:[Object(le.jsx)(u.a,{onClick:function(){w.a.get("/apibuggy/not-found").catch((function(e){return console.log(e.response)}))},content:"Not Found",basic:!0,primary:!0}),Object(le.jsx)(u.a,{onClick:function(){w.a.get("/apibuggy/bad-request").catch((function(e){return console.log(e.response)}))},content:"Bad Request",basic:!0,primary:!0}),Object(le.jsx)(u.a,{onClick:function(){w.a.post("/apiactivities",{}).catch((function(e){return i(e)}))},content:"Validation Error",basic:!0,primary:!0}),Object(le.jsx)(u.a,{onClick:function(){w.a.get("/apibuggy/server-error").catch((function(e){return console.log(e.response)}))},content:"Server Error",basic:!0,primary:!0}),Object(le.jsx)(u.a,{onClick:function(){w.a.get("/apibuggy/unauthorised").catch((function(e){return console.log(e.response)}))},content:"Unauthorised",basic:!0,primary:!0}),Object(le.jsx)(u.a,{onClick:function(){w.a.get("/apiactivities/notaguid").catch((function(e){return console.log(e)}))},content:"Bad Guid",basic:!0,primary:!0})]}),n&&Object(le.jsx)(Ve,{errors:n})]})]})}function Ot(){return Object(le.jsxs)(Oe.a,{placeholder:!0,children:[Object(le.jsxs)(pe.a,{icon:!0,children:[Object(le.jsx)(ge.a,{name:"search"}),"Oops, we've looked everywhere and could not find this."]}),Object(le.jsx)(Oe.a.Inline,{children:Object(le.jsx)(u.a,{as:j.a,to:_,primary:!0,children:"Go to activities page"})})]})}var vt=Object(b.a)((function(){var e,t,n=ue().commonStore;return Object(le.jsxs)(a.a,{children:[Object(le.jsx)(pe.a,{as:"h2",content:"Server Error"}),Object(le.jsx)(pe.a,{sub:!0,as:"h3",content:null===(e=n.error)||void 0===e?void 0:e.message,color:"red"}),(null===(t=n.error)||void 0===t?void 0:t.details)&&Object(le.jsxs)(Oe.a,{children:[Object(le.jsx)(pe.a,{sub:!0,as:"h4",content:"Stack Trace",color:"teal",style:{marginBottom:"10px"}}),Object(le.jsx)("code",{children:n.error.details})]})]})})),xt=n(507),gt=Object(b.a)((function(){var e=ue().modalStore;return Object(le.jsx)(xt.a,{open:e.isOpen,onClose:e.closeModal,size:"mini",children:Object(le.jsx)(xt.a.Content,{children:e.content})})})),mt=n(513),yt=n(499),wt=Object(b.a)((function(e){var t=e.profile;return Object(le.jsx)(Oe.a,{children:Object(le.jsxs)(be.a,{children:[Object(le.jsx)(be.a.Column,{width:"12",children:Object(le.jsx)(xe.a.Group,{children:Object(le.jsxs)(xe.a,{children:[Object(le.jsx)(xe.a.Image,{src:t.image||P,size:"small",avatar:!0}),Object(le.jsx)(xe.a.Content,{verticalAlign:"middle",children:Object(le.jsx)(pe.a,{as:"h1",content:t.displayName})})]})})}),Object(le.jsxs)(be.a.Column,{width:"4",children:[Object(le.jsxs)(mt.a.Group,{widths:"2",children:[Object(le.jsx)(mt.a,{label:"Followers",value:t.followersCount}),Object(le.jsx)(mt.a,{label:"Following",value:t.followingCount})]}),Object(le.jsx)(yt.a,{}),Object(le.jsx)(ke,{profile:t})]})]})})})),Ct=n(519),kt=n(286),_t={border:"dashed 3px #eee",borderColor:"#eee",borderRadius:"5px",paddingTop:"30px",textAlign:"center",height:200},At={borderColor:"green"};function St(e){var t=e.setFiles,n=Object(r.useCallback)((function(e){t(e.map((function(e){return Object.assign(File,{preview:URL.createObjectURL(e)})})))}),[t]),i=Object(kt.a)({onDrop:n}),c=i.getRootProps,a=i.getInputProps,o=i.isDragActive;return Object(le.jsxs)("div",Object(f.a)(Object(f.a)({},c()),{},{style:o?Object(f.a)(Object(f.a)({},_t),At):_t,children:[Object(le.jsx)("input",Object(f.a)({},a())),Object(le.jsx)(ge.a,{name:"upload",size:"huge"}),Object(le.jsx)(pe.a,{content:"Drop image here"})]}))}n(475);var It=n(283);function Pt(e){var t=e.imagePreview,n=e.setCropper;return Object(le.jsx)(It.a,{src:t,style:{height:200,width:"100%"},initialAspectRatio:1,aspectRatio:1,preview:".img-preview",guides:!1,viewMode:1,dragMode:"move",autoCropArea:1,modal:!1,background:!1,zoomOnWheel:!1,onInitialized:function(e){return n(e)}})}function Lt(e){var t=e.loading,n=e.uploadPhoto,i=Object(r.useState)([]),c=Object(je.a)(i,2),a=c[0],o=c[1],s=Object(r.useState)(),l=Object(je.a)(s,2),d=l[0],j=l[1];return Object(r.useEffect)((function(){return function(){a.forEach((function(e){return URL.revokeObjectURL(e)}))}}),[a]),Object(le.jsxs)(be.a,{children:[Object(le.jsxs)(be.a.Column,{width:"4",children:[Object(le.jsx)(pe.a,{sub:!0,color:"teal",content:"Step 1 - Upload photo"}),Object(le.jsx)(St,{setFiles:o})]}),Object(le.jsx)(be.a.Column,{width:"1"}),Object(le.jsxs)(be.a.Column,{width:"4",children:[Object(le.jsx)(pe.a,{sub:!0,color:"teal",content:"Step 2 - Resize image"}),a.length>0&&Object(le.jsx)(Pt,{imagePreview:a[0].preview,setCropper:j})]}),Object(le.jsx)(be.a.Column,{width:"1"}),Object(le.jsxs)(be.a.Column,{width:"4",children:[Object(le.jsx)(pe.a,{sub:!0,color:"teal",content:"Step 1 - Preview upload"}),a.length>0&&Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)("div",{className:"img-preview",style:{minHeight:182,overflow:"hidden"}}),Object(le.jsxs)(u.a.Group,{widths:2,attached:"bottom",children:[Object(le.jsx)(u.a,{onClick:function(){d&&d.getCroppedCanvas().toBlob((function(e){return n(e)}))},loading:t,disabled:t,icon:"check",positive:!0}),Object(le.jsx)(u.a,{onClick:function(){return o([])},disabled:t,icon:"close"})]})]})]})]})}var Nt=Object(b.a)((function(){var e,t=Object(r.useState)(!1),n=Object(je.a)(t,2),i=n[0],c=n[1],a=Object(r.useState)(null),o=Object(je.a)(a,2),s=o[0],d=o[1],j=ue().profileStore,b=j.profile,h=j.isCurrentUser,f=j.uploadPhoto,p=j.isUploading,O=j.setMainImage,v=j.isLoading,x=j.deleteImage;if(!b)return Object(le.jsx)(Ot,{});return Object(le.jsxs)(be.a,{children:[Object(le.jsxs)(be.a.Column,{width:"16",children:[Object(le.jsx)(pe.a,{icon:"image",content:"Photos",floated:"left"}),h&&Object(le.jsx)(u.a,{floated:"right",basic:!0,content:i?"Cancel":"Add photo",onClick:function(){return c(!i)}})]}),Object(le.jsx)(be.a.Column,{width:"16",children:i?Object(le.jsx)(Lt,{uploadPhoto:function(e){f(e).then((function(){return c(!1)}))},loading:p}):Object(le.jsx)(we.a.Group,{itemsPerRow:5,children:null===(e=b.photos)||void 0===e?void 0:e.map((function(e){return Object(le.jsxs)(we.a,{children:[Object(le.jsx)(l.a,{src:e.url}),h&&Object(le.jsxs)(u.a.Group,{widths:2,attached:"bottom",fluid:!0,children:[Object(le.jsx)(u.a,{onClick:function(t){return function(e,t){s||(d(t.currentTarget.name),O(e).then((function(){return d(null)})))}(e,t)},content:"Main",name:"main"+e.id,disabled:e.isMain,loading:v&&s==="main"+e.id,basic:!0,color:"green",style:{zIndex:1}}),Object(le.jsx)(u.a,{onClick:function(t){return function(e,t){s||(d(t.currentTarget.name),x(e).then((function(){return d(null)})))}(e,t)},icon:"trash",name:e.id,disabled:e.isMain,loading:v&&s===e.id,basic:!0,color:"grey"})]})]},e.id)}))})})]})})),Ft=Object(b.a)((function(e){var t=e.profile,n=e.onSubmitted,r=ue().profileStore.updateProfile,i=qe.a({displayName:qe.b().required("Display name is required")});return Object(le.jsx)(Re.d,{initialValues:{displayName:t.displayName,about:t.about},validationSchema:i,onSubmit:function(e){r(e).then(n)},children:function(e){var t=e.isSubmitting,n=e.isValid,r=e.dirty;return Object(le.jsxs)(Re.c,{className:"ui form",children:[Object(le.jsx)(Ge,{placeholder:"DisplayName",name:"displayName"}),Object(le.jsx)(Xe,{placeholder:"About me",name:"about",rows:5}),Object(le.jsx)(u.a,{type:"submit",content:"Update profile",floated:"right",positive:!0,loading:t,disabled:t||!r||!n})]})}})})),Mt=Object(b.a)((function(){var e=ue().profileStore,t=e.profile,n=e.isCurrentUser,i=Object(r.useState)(!1),c=Object(je.a)(i,2),a=c[0],o=c[1];return t?Object(le.jsxs)(be.a,{children:[Object(le.jsxs)(be.a.Column,{width:"16",children:[Object(le.jsx)(pe.a,{content:"About ".concat(t.displayName),icon:"user",floated:"left"}),n&&Object(le.jsx)(u.a,{content:a?"Cancel":"Edit Profile",floated:"right",basic:!0,onClick:function(){return o(!a)}})]}),Object(le.jsx)(be.a.Column,{width:"16",children:a?Object(le.jsx)(Ft,{profile:t,onSubmitted:function(){return o(!1)}}):Object(le.jsx)("span",{style:{whiteSpace:"pre-line"},children:t.about||"Hello, I am ".concat(t.displayName)})})]}):Object(le.jsx)(Ot,{})})),Ut=Object(b.a)((function(){var e=ue().profileStore,t=e.profile,n=e.followings,r=e.activeTab;return Object(le.jsxs)(be.a,{children:[Object(le.jsx)(be.a.Column,{width:16,children:Object(le.jsx)(pe.a,{floated:"left",icon:"user",content:r===Y.Following?"People ".concat(null===t||void 0===t?void 0:t.displayName," is following"):"People following ".concat(null===t||void 0===t?void 0:t.displayName)})}),Object(le.jsx)(be.a.Column,{width:16,children:Object(le.jsx)(we.a.Group,{itemsPerRow:4,children:n.map((function(e){return Object(le.jsx)(_e,{profile:e},e.userName)}))})})]})}));function Et(e){var t=e.activity,n=new Date;return Object(le.jsxs)(we.a,{as:j.a,to:A(t.id),children:[Object(le.jsx)(l.a,{src:L("".concat(t.category,".jpg")),disabled:t.date<n}),Object(le.jsxs)(we.a.Content,{textAlign:"center",children:[Object(le.jsx)(we.a.Header,{children:t.title}),Object(le.jsx)(we.a.Meta,{children:K(t.date,"dd MMM")}),Object(le.jsx)(we.a.Meta,{children:K(t.date,"hh:mm")})]})]})}var Tt=function e(t,n){Object(x.a)(this,e),this.menuItem=void 0,this.key=void 0,this.menuItem=t,this.key=n},Dt=[new Tt("Future Events","future"),new Tt("Past Events","past"),new Tt("Hosting","hosting")],Rt=Object(b.a)((function(){var e=ue().profileStore,t=e.profileActivities,n=e.isLoading,i=e.loadProfileActivities,c=e.clearProfileActivities;return Object(r.useEffect)((function(){return i(Dt[0].key),function(){c()}}),[i,c]),Object(le.jsxs)(be.a,{children:[Object(le.jsx)(be.a.Column,{width:16,children:Object(le.jsx)(pe.a,{icon:"calendar",content:"Activities"})}),Object(le.jsx)(be.a.Column,{width:16,children:Object(le.jsx)(Ct.a,{panes:Dt,menu:{secondary:!0,pointing:!0},onTabChange:function(e,t){var n=t.activeIndex;i(Dt[n].key)},defaultActiveIndex:0})}),Object(le.jsx)(be.a.Column,{width:16,children:n?Object(le.jsx)(fe.a,{active:!0}):Object(le.jsx)(we.a.Group,{itemsPerRow:4,children:t.map((function(e){return Object(le.jsx)(Et,{activity:e},e.id)}))})})]})})),zt=Object(b.a)((function(){var e=ue().profileStore,t=e.isLoadingFollowers,n=[{menuItem:"About",render:function(){return Object(le.jsx)(Ct.a.Pane,{children:Object(le.jsx)(Mt,{})})}},{menuItem:"Photos",render:function(){return Object(le.jsx)(Ct.a.Pane,{children:Object(le.jsx)(Nt,{})})}},{menuItem:"Events",render:function(){return Object(le.jsx)(Ct.a.Pane,{children:Object(le.jsx)(Rt,{})})}},{menuItem:"Followers",render:function(){return Object(le.jsx)(Ct.a.Pane,{loading:t,children:Object(le.jsx)(Ut,{})})}},{menuItem:"Following",render:function(){return Object(le.jsx)(Ct.a.Pane,{loading:t,children:Object(le.jsx)(Ut,{})})}}];return Object(le.jsx)(Ct.a,{menu:{fluid:!0,vertical:!0},menuPosition:"right",panes:n,onTabChange:function(t,n){return e.activeTab=n.activeIndex}})})),Gt=Object(b.a)((function(){var e=Object(De.i)().userName,t=ue().profileStore,n=t.profile,i=t.loadProfile,c=t.isLoadingProfile,a=t.isCurrentUser;return Object(r.useEffect)((function(){return i(e),function(){t.activeTab=0}}),[i,e,t]),c?Object(le.jsx)(Ze,{content:"Loading profile..."}):Object(le.jsx)(be.a,{children:Object(le.jsx)(be.a.Column,{width:"16",children:n&&Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)(wt,{profile:n,isCurrentUser:a}),Object(le.jsx)(zt,{})]})})})})),Ht=n(288),qt=["component"];function Bt(e){var t=e.component,n=Object(Ht.a)(e,qt),r=ue().userStore.isLoggedIn;return Object(le.jsx)(De.b,Object(f.a)(Object(f.a)({},n),{},{render:function(e){return r?Object(le.jsx)(t,Object(f.a)({},e)):Object(le.jsx)(De.a,{to:k})}}))}var Vt=Object(b.a)((function(){var e=Object(De.h)(),t=ue(),n=t.userStore,i=t.commonStore;return Object(r.useEffect)((function(){i.token?n.loadCurrentUser().finally((function(){return i.setAppLoaded()})):i.setAppLoaded()}),[n,i]),i.appLoaded?Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)(C.a,{position:"bottom-right",hideProgressBar:!0}),Object(le.jsx)(gt,{}),Object(le.jsx)(De.b,{exact:!0,path:k,component:Je}),Object(le.jsx)(De.b,{path:"/(.+)",render:function(){return Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)(de,{}),Object(le.jsx)(a.a,{style:{marginTop:"7em"},children:Object(le.jsxs)(De.d,{children:[Object(le.jsx)(Bt,{exact:!0,path:_,component:Te}),Object(le.jsx)(Bt,{path:A(":id"),component:ft}),Object(le.jsx)(Bt,{path:[I,S(":id")],component:at},e.key),Object(le.jsx)(Bt,{path:U(":userName"),component:Gt}),Object(le.jsx)(Bt,{path:F,component:pt}),Object(le.jsx)(De.b,{path:"/server-error",component:vt}),Object(le.jsx)(Bt,{component:Ot})]})})]})}})]}):Object(le.jsx)(Ze,{content:"Loading app..."})})),Wt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,520)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,c=t.getLCP,a=t.getTTFB;n(e),r(e),i(e),c(e),a(e)}))},Jt=n(47);function Kt(){var e=Object(De.h)().pathname;return Object(r.useEffect)((function(){window.scrollTo(0,0)}),[e]),null}var Yt=Object(Jt.a)();c.a.render(Object(le.jsx)(se.Provider,{value:oe,children:Object(le.jsxs)(De.c,{history:Yt,children:[Object(le.jsx)(Kt,{}),Object(le.jsx)(Vt,{})]})}),document.getElementById("root")),Wt()}},[[476,1,2]]]);
//# sourceMappingURL=main.bd65cef3.chunk.js.map